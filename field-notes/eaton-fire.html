<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Eaton Fire — Field Notes by Ric Berryman</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Shared site styles -->
  <link rel="stylesheet" href="../styles.css" />

  <style>
    /* =========================================================
       FIELD NOTES — EATON FIRE
       - Vimeo hero video (autoplay muted) + clear unmute affordance
       - Inline photos + captions (auto-hide when empty)
       - Gallery + lightbox (gallery order = lightbox order)
       - No masonry “pop” (tiles reserve aspect-ratio before append)
       ========================================================= */

    :root{
      --bg: #E8DDD1;
      --ink: #2E2621;

      --edge: clamp(14px, 2.2vw, 32px);

      /* prose width */
      --prose: 1400px;

      /* inline widths */
      --inline-wide: 1380px;
      --inline-full: 1920px;

      --radius-img: 22px;
      --shadow-soft: 0 18px 55px rgba(0,0,0,0.22);
      --shadow: 0 22px 70px rgba(0,0,0,0.26);

      /* Lightbox sizing */
      --lb-w: min(2200px, 98vw);
      --lb-h: calc(100vh - 64px);
    }

    /* Keep the wide-vs-full rhythm on laptop screens */
    @media (max-width: 1200px){
      :root{
        --inline-wide: 520px;
        --prose: 1050px;
      }
    }

    @media (max-width: 768px){
      :root{
        --inline-wide: 92vw;
        --prose: 92vw;
        --lb-h: calc(100vh - 120px);
      }
    }

    body{
      background: var(--bg);
      color: var(--ink);
      -webkit-font-smoothing: antialiased;
      text-rendering: geometricPrecision;
    }

    #nav-mount{ position: relative; z-index: 5; }
    main{ padding-bottom: 6rem; }

    /* =========================================================
       HERO — Beauty-style
       ========================================================= */
    .label-pill{
      display: inline-block;
      padding: 0.25rem 0.9rem;
      border-radius: 999px;
      border: 1px solid rgba(253, 248, 240, 0.6);
      text-transform: uppercase;
      letter-spacing: 0.16em;
      font-size: 0.7rem;
      font-weight: 600;
      color: #FDF8F0;
      background: rgba(0, 0, 0, 0.28);
      backdrop-filter: blur(6px);
    }

    .fn-hero{
      position: relative;
      height: 90vh;
      min-height: 540px;
      display: flex;
      align-items: flex-end;
      padding: 3.5rem 3rem;
      overflow: hidden;
      color: #FDF8F0;
      border-radius: 0;
      box-shadow: none;
      margin: 0;
      isolation: isolate;
    }

    @media (max-width: 768px){
      .fn-hero{ padding: 2.5rem 1.5rem; min-height: 480px; }
    }

    .fn-hero::before{
      content:"";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at top left, rgba(0, 0, 0, 0.55), transparent 60%),
        linear-gradient(to top, rgba(0, 0, 0, 0.78), rgba(0, 0, 0, 0.06));
      pointer-events: none;
      z-index: 2;
    }

    .fn-hero-inner{
      position: relative;
      z-index: 3;
      max-width: 720px;
    }

    .fn-hero-title{
      font-size: clamp(2.6rem, 7.8vw, 4.6rem);
      letter-spacing: 0.28em;
      text-transform: uppercase;
      font-weight: 300;
      margin: 0.75rem 0 0.8rem;
      line-height: 0.95;
    }

    .fn-hero-sub{
      font-size: 1.02rem;
      line-height: 1.9;
      max-width: 60ch;
      margin-bottom: 1.8rem;
      opacity: 0.95;
    }

    .fn-tags{
      display: flex;
      flex-wrap: wrap;
      gap: 0.45rem;
      margin-bottom: 1.8rem;
      font-size: 0.78rem;
    }

    .fn-tags span{
      padding: 0.22rem 0.78rem;
      border-radius: 999px;
      border: 1px solid rgba(253, 248, 240, 0.28);
      text-transform: uppercase;
      letter-spacing: 0.13em;
      background: rgba(0, 0, 0, 0.24);
    }

    .scroll-hint{
      display: inline-flex;
      flex-direction: row;
      align-items: center;
      gap: 0.45rem;
      font-size: 0.72rem;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      opacity: 0.78;
    }

    .scroll-hint svg{
      width: 16px;
      height: 16px;
      animation: bounceDown 1.5s infinite;
    }

    @keyframes bounceDown{
      0%{ transform: translateY(0); }
      50%{ transform: translateY(5px); }
      100%{ transform: translateY(0); }
    }

    /* =========================================================
       HERO MEDIA (Vimeo)
       ========================================================= */
    .fn-hero-media{
      position: absolute;
      inset: 0;
      z-index: 0;
      background: #000;
      overflow: hidden;
    }

    .fn-hero-media iframe{
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }

    /* Make it less “backgroundy”: subtly brighten + reduce heavy darkness */
    .video-scrim{
      position: absolute;
      inset: 0;
      z-index: 1;
      background: linear-gradient(
        to top,
        rgba(0,0,0,0.55),
        rgba(0,0,0,0.18)
      );
      pointer-events: none;
    }

    /* Clear unmute affordance */
    .sound-pill{
      position: absolute;
      left: 1.5rem;
      bottom: 1.35rem;
      z-index: 4;
      display: inline-flex;
      align-items: center;
      gap: 0.6rem;
      padding: 0.55rem 0.95rem;
      border-radius: 999px;
      border: 1px solid rgba(253, 248, 240, 0.28);
      background: rgba(20, 14, 11, 0.55);
      backdrop-filter: blur(8px);
      color: rgba(253,248,240,0.95);
      font-size: 0.72rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      cursor: pointer;
      user-select: none;
      transition: transform 0.25s ease, background 0.25s ease, opacity 0.25s ease;
    }

    .sound-pill:hover{ transform: translateY(-2px); background: rgba(20, 14, 11, 0.68); }
    .sound-pill.hidden{ opacity: 0; pointer-events: none; transform: translateY(6px); }

    .sound-dot{
      width: 8px; height: 8px;
      border-radius: 999px;
      background: rgba(255,255,255,0.9);
      opacity: 0.9;
    }

    @media (max-width: 768px){
      .sound-pill{ left: 1rem; bottom: 1rem; }
    }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce){
      .fn-hero-media iframe{ display:none; }
    }

    /* =========================================================
       ARTICLE / PROSE
       ========================================================= */
    .fn-article{ width: 100%; margin: 2.4rem auto 0; }

    .fn-prose{
      max-width: var(--prose);
      margin: 0 auto;
      padding: 0 var(--edge);
      font-size: 1.3rem;
      line-height: 1.95;
      color: var(--ink);
    }

    .fn-prose p{
      margin: 0 0 1.35rem;
      opacity: 0.92;
    }

    .fn-prose strong{ letter-spacing: 0.02em; }

    .fn-rule{
      max-width: var(--prose);
      margin: 2.2rem auto;
      height: 1px;
      border: 0;
      background: linear-gradient(to right, transparent, rgba(46,38,33,0.14), transparent);
    }

    /* =========================================================
       INLINE FIGURES
       ========================================================= */
    .fn-figure{
      width: min(var(--inline-wide), calc(100vw - (var(--edge) * 2)));
      margin: 2.1rem auto;
      position: relative;
    }

    .fn-figure.is-full{
      width: min(var(--inline-full), calc(100vw - (var(--edge) * 1)));
    }

    .fn-figure .img-wrap{
      position: relative;
      border-radius: var(--radius-img);
      overflow: hidden;
      box-shadow: var(--shadow);
      background: #000;
      cursor: zoom-in;
    }

    .fn-figure.is-full .img-wrap{
      border-radius: 0;
      box-shadow: none;
    }

    .fn-figure img{
      width: 100%;
      height: auto;
      display: block;
      transform: scale(1.01);
      transition: transform 0.85s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .fn-figure:hover img{ transform: scale(1.05); }

    .fn-cap{
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      padding: 1.0rem 1.15rem;
      color: rgba(253,248,240,0.95);
      font-size: 0.78rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      line-height: 1.55;
      background: linear-gradient(to top, rgba(0,0,0,0.70), rgba(0,0,0,0.0));
      pointer-events: none;
    }

    .fn-cap .cap-line{
      display: inline-block;
      padding-top: 0.25rem;
      border-top: 1px solid rgba(253,248,240,0.22);
      max-width: min(980px, 92%);
    }

    .fn-cap.is-empty{ display:none; }

    /* =========================================================
       GALLERY (columns)
       ========================================================= */
    .fn-gallery{
      margin-top: 3.4rem;
      width: 100%;
    }

    .fn-gallery-header{
      max-width: var(--prose);
      margin: 0 auto 1.4rem;
      padding: 0 var(--edge);
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 1rem;
    }

    .fn-gallery-header h2{
      margin: 0;
      font-size: 1.05rem;
      text-transform: uppercase;
      letter-spacing: 0.22em;
      font-weight: 600;
      color: rgba(76,42,27,0.92);
    }

    .fn-gallery-header span{
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: rgba(46,38,33,0.68);
      white-space: nowrap;
    }

    .fn-grid{
      width: calc(100vw - (var(--edge) * 2));
      margin: 0 auto;
      column-count: 3;
      column-gap: 2.2rem;
    }

    @media (max-width: 1100px){ .fn-grid{ column-count: 2; } }
    @media (max-width: 680px){ .fn-grid{ column-count: 1; } }

    .fn-tile{
      display: inline-block;
      width: 100%;
      break-inside: avoid;
      margin: 0 0 1.15rem;
      position: relative;
      border-radius: 18px;
      overflow: hidden;
      background: #000;
      box-shadow: var(--shadow-soft);
      cursor: zoom-in;

      transform: translateY(18px);
      opacity: 0;
      transition: transform 0.7s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.7s ease;
    }

    .fn-tile.in{ transform: translateY(0); opacity: 1; }

    .fn-tile img{
      width: 100%;
      height: 100%;
      display: block;
      object-fit: cover;
      transform: scale(1.02);
      transition: transform 0.85s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .fn-tile:hover img{ transform: scale(1.07); }

    .tile-cap{
      position: absolute;
      left: 0; right: 0; bottom: 0;
      padding: 0.85rem 0.9rem;
      color: rgba(253,248,240,0.95);
      font-size: 0.72rem;
      letter-spacing: 0.11em;
      text-transform: uppercase;
      line-height: 1.55;
      background: linear-gradient(to top, rgba(0,0,0,0.70), rgba(0,0,0,0));
      pointer-events: none;
      display: none;
    }
    .fn-tile.has-cap .tile-cap{ display:block; }

    /* =========================================================
       LIGHTBOX
       ========================================================= */
    .lb{
      position: fixed;
      inset: 0;
      z-index: 9999;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(10, 6, 4, 0.90);
      backdrop-filter: blur(10px);
    }

    .lb.open{ display: flex; animation: lbFade 0.18s ease-out; }
    @keyframes lbFade{ from{opacity:0} to{opacity:1} }

    .lb-inner{
      width: var(--lb-w);
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      color: rgba(253,248,240,0.92);
    }

    .lb-stage{
      position: relative;
      height: var(--lb-h);
      border-radius: 20px;
      overflow: hidden;
      background: #000;
      box-shadow: 0 30px 110px rgba(0,0,0,0.72);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      box-sizing: border-box;
    }

    .lb-img{
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
      opacity: 1;
      transform: translateX(0);
      transition: transform 0.6s cubic-bezier(0.22, 0.61, 0.36, 1), opacity 0.6s ease;
    }

    .lb-close{
      position: absolute;
      top: 0.85rem;
      right: 0.85rem;
      width: 38px;
      height: 38px;
      border-radius: 999px;
      border: 1px solid rgba(253,248,240,0.28);
      background: rgba(26, 20, 17, 0.88);
      color: rgba(253,248,240,0.95);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      z-index: 3;
    }

    .lb-nav{
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 0.7rem;
      pointer-events: none;
      z-index: 2;
    }

    .lb-btn{
      width: 54px;
      height: 54px;
      border-radius: 999px;
      border: 1px solid rgba(253,248,240,0.22);
      background: rgba(26, 20, 17, 0.88);
      color: rgba(253,248,240,0.95);
      cursor: pointer;
      pointer-events: auto;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      user-select: none;
    }

    @media (max-width: 768px){
      .lb-btn{ width: 42px; height: 42px; font-size: 1.1rem; }
      .lb-close{ width: 36px; height: 36px; }
    }

    .lb-meta{
      width: 100%;
      padding: 0 var(--edge);
      color: rgba(253,248,240,0.88);
      display: flex;
      flex-direction: column;
      gap: 0.45rem;
    }

    .lb-caption{
      font-size: 0.82rem;
      letter-spacing: 0.10em;
      text-transform: uppercase;
      line-height: 1.6;
      opacity: 0.92;
      max-width: min(1200px, 100%);
      min-height: 1.2em;
    }

    .lb-count{
      font-size: 0.75rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      opacity: 0.65;
    }
  </style>
</head>

<body>
  <!-- Shared nav mount -->
  <div id="nav-mount"></div>

  <main>
    <!-- HERO -->
    <section class="fn-hero">
      <div class="fn-hero-media" id="hero-media">
        <iframe
          id="vimeo-iframe"
          src="https://player.vimeo.com/video/1150202057?background=1&autoplay=1&loop=1&muted=1&playsinline=1&title=0&byline=0&portrait=0"
          frameborder="0"
          allow="autoplay; fullscreen; picture-in-picture"
          title="Eaton Fire"
        ></iframe>
        <div class="video-scrim" aria-hidden="true"></div>
      </div>

      <button class="sound-pill" id="sound-pill" type="button" aria-label="Tap to unmute video">
        <span class="sound-dot" aria-hidden="true"></span>
        <span id="sound-text">Tap for sound</span>
      </button>

      <div class="fn-hero-inner">
        <span class="label-pill">Field Notes</span>
        <h1 class="fn-hero-title">Eaton Fire</h1>
        <p class="fn-hero-sub">
          Witnessing resilience amid destruction — documenting the aftermath.
        </p>

        <div class="fn-tags">
          <span>Los Angeles</span>
          <span>Wildfire</span>
          <span>Aftermath</span>
          <span>Resilience</span>
        </div>

        <div class="scroll-hint">
          <span>Scroll to read</span>
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 4v14m0 0-5-5m5 5 5-5"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.4"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
          </svg>
        </div>
      </div>
    </section>

    <article class="fn-article">

      <section class="fn-prose">
        <p>
          The devastation left in the wake of the Eaton Fire in Altadena is difficult to put into words. As a photographer, I’ve always believed in the power of images to tell stories that words alone cannot convey. I ventured into the heart of a community forever changed, seeking to document not just the destruction but also the resilience, compassion, and humanity that rose from the ashes.
        </p>

        <p>
          When I first arrived in Altadena with my camera, my intention was to capture a few images of familiar places, like Fox’s Restaurant, which now stands as little more than a doorway and its sign—and I did. But as I parked on a nearby side street and began to walk, I was struck by an overwhelming sense of disbelief. The scenes before me felt like something out of a movie—surreal, unimaginable, and heartbreaking.
        </p>
      </section>

      <!-- INLINE: eaton-fire-01.jpg -->
      <figure class="fn-figure fn-photo" data-src="../assets/images/field-notes/eaton-fire/eaton-fire-01.jpg">
        <div class="img-wrap">
          <img src="../assets/images/field-notes/eaton-fire/eaton-fire-01.jpg" alt="Eaton Fire photograph 01" />
          <div class="fn-cap"><span class="cap-line" data-cap-for="eaton-fire-01.jpg"></span></div>
        </div>
      </figure>

      <section class="fn-prose">
        <p>
          This was still early days and they just started letting residents back in. Save for law enforcement, there were very few people and the stillness and calm was surreal with the backdrop of the devastation. But as I walked, I found a woman standing motionless, staring at what was once her home, now reduced to ash and rubble. Across the street, a man sifted through debris, his hands combing through the remnants of his life without so much as a mask for protection. I could feel the weight of their loss, and in that moment, lifting my camera felt intrusive, as though I were trespassing on a profoundly intimate and painful experience so I didn’t. Overwhelmed, I returned to my car and drove away.
        </p>
      </section>

      <!-- INLINE: eaton-fire-02.jpg -->
      <figure class="fn-figure fn-photo" data-src="../assets/images/field-notes/eaton-fire/eaton-fire-02.jpg">
        <div class="img-wrap">
          <img src="../assets/images/field-notes/eaton-fire/eaton-fire-02.jpg" alt="Eaton Fire photograph 02" />
          <div class="fn-cap"><span class="cap-line" data-cap-for="eaton-fire-02.jpg"></span></div>
        </div>
      </figure>

      <section class="fn-prose">
        <p>
          I returned about a week later, with much of the area reopened to traffic. The National Guard was stationed there, alongside utility workers, law enforcement, and so many people in their cars, trying to get a glimpse of the destruction. My intent wasn’t just to see it but to document as much as I could. Still, the sense of intrusion lingered and as soon as I stepped out of my car and raised my camera, a local man called out to me. I braced for him to chase me off—something I would have understood completely—but instead, he was just curious about what I was doing.
        </p>

        <p>
          We struck up a conversation, and I learned that he and his wife had lost everything. She couldn’t yet bring herself to visit the site, so he was there alone, waiting for an insurance adjuster. What struck me most was his resilience. While he was clearly moved by the enormity of his family’s loss, he remained composed and pragmatic. Optimistic might not be the right word, but I marveled at how he maintained a sense of calm, even without knowing what the next chapter of his life would hold for him and his family. Would they rebuild? Sell the land? Where would they go if they chose to leave?
        </p>
      </section>

      <!-- INLINE: eaton-fire-03.jpg -->
      <figure class="fn-figure fn-photo" data-src="../assets/images/field-notes/eaton-fire/eaton-fire-03.jpg">
        <div class="img-wrap">
          <img src="../assets/images/field-notes/eaton-fire/eaton-fire-03.jpg" alt="Eaton Fire photograph 03" />
          <div class="fn-cap"><span class="cap-line" data-cap-for="eaton-fire-03.jpg"></span></div>
        </div>
      </figure>

      <section class="fn-prose">
        <p>
          By now, the world knows that the Eaton Fire consumed thousands of acres, destroyed homes, businesses, and landmarks, and left behind a landscape of charred ruins and shattered lives. Walking through the remains of what was once a vibrant neighborhood, I couldn’t help but reflect on the broader significance of this tragedy. This isn’t just a local disaster; it’s a stark reminder of how climate change is reshaping our world. Extreme weather, prolonged droughts, and relentless heat waves have made fires like this increasingly common.
        </p>

        <p>
          Climate change is not a distant or abstract issue—it’s here, it’s now. It’s staring us right in the face and it’s profoundly impacting the everyday lives of everyday people, regardless of political affiliation, race, color, or creed. The irony wasn’t lost on me as I recalled a summer barbecue at a friend’s house in this very neighborhood several years ago. We’d debated climate change over cocktails, with my friend dismissing “global warming” as nothing more than a liberal money-making machine and a hoax. Well, that “hoax” just erased that charming little house from existence. I’ve since lost touch with those friends and don’t know if they were still living there, but wherever they are, I hope they’re safe.
        </p>
      </section>

      <!-- INLINE: eaton-fire-05.jpg -->
      <figure class="fn-figure fn-photo" data-src="../assets/images/field-notes/eaton-fire/eaton-fire-05.jpg">
        <div class="img-wrap">
          <img src="../assets/images/field-notes/eaton-fire/eaton-fire-05.jpg" alt="Eaton Fire photograph 05" />
          <div class="fn-cap"><span class="cap-line" data-cap-for="eaton-fire-05.jpg"></span></div>
        </div>
      </figure>

      <hr class="fn-rule" />

      <!-- GALLERY -->
      <section class="fn-gallery" aria-label="Eaton Fire photo gallery">
        <div class="fn-gallery-header">
          <h2>Gallery</h2>
          <span>Click any image for lightbox</span>
        </div>
        <div class="fn-grid" id="gallery-grid"></div>
      </section>
    </article>
  </main>

  <!-- LIGHTBOX -->
  <div class="lb" id="lb" aria-hidden="true">
    <div class="lb-inner">
      <div class="lb-stage">
        <div class="lb-nav">
          <button class="lb-btn" id="lb-prev" aria-label="Previous image">←</button>
          <button class="lb-btn" id="lb-next" aria-label="Next image">→</button>
        </div>
        <img class="lb-img" id="lb-img" src="" alt="" />
        <button class="lb-close" id="lb-close" aria-label="Close">✕</button>
      </div>

      <div class="lb-meta">
        <div class="lb-caption" id="lb-caption"></div>
        <div class="lb-count" id="lb-count"></div>
      </div>
    </div>
  </div>

  <!-- Shared nav loader -->
  <script src="../assets/js/load-nav.js"></script>
  <script src="https://player.vimeo.com/api/player.js"></script>

  <script>
    (function () {
      /* ---------------------------------------------------------
         EATON FIRE — Field Notes JS (FULL)
         - Vimeo hero autoplay muted + tap-for-sound affordance
         - Captions overlay on inline photos + tiles + lightbox
         - Gallery order = Lightbox order
         - Stable layout (no pop): reserve aspect ratio before append
         --------------------------------------------------------- */

      /* =========================
         1) CONFIG
         ========================= */

      const BASE = "../assets/images/field-notes/eaton-fire/";

      // ✅ Add/remove/reorder freely — this is BOTH gallery order and lightbox order
  const GALLERY_ORDER = [
  "eaton-fire-01.jpg",
  "eaton-fire-02.jpg",
  "eaton-fire-03.jpg",
  "eaton-fire-05.jpg",
  "eaton-fire-06.jpg",
  "eaton-fire-07.jpg",
  "eaton-fire-08.jpg",
  "eaton-fire-09.jpg",
  "eaton-fire-10.jpg",
  "eaton-fire-11.jpg",
  "eaton-fire-12.jpg",
  "eaton-fire-13.jpg",
  "eaton-fire-14.jpg",
  "eaton-fire-15.jpg",
  "eaton-fire-16.jpg",
  "eaton-fire-17.jpg",
  "eaton-fire-18.jpg",
  "eaton-fire-19.jpg",
  "eaton-fire-20.jpg",
  "eaton-fire-21.jpg",
  "eaton-fire-22.jpg",
  "eaton-fire-23.jpg",
  "eaton-fire-24.jpg",
  "eaton-fire-25.jpg",
  "eaton-fire-26.jpg",
  "eaton-fire-27.jpg",
  "eaton-fire-28.jpg",
  "eaton-fire-29.jpg",
  "eaton-fire-30.jpg",
  "eaton-fire-31.jpg",
  "eaton-fire-32.jpg",
  "eaton-fire-33.jpg",
  "eaton-fire-34.jpg",
  "eaton-fire-35.jpg",
  "eaton-fire-36.jpg",
  "eaton-fire-37.jpg",
  "eaton-fire-38.jpg",
  "eaton-fire-39.jpg",
  "eaton-fire-40.jpg",
  "eaton-fire-41.jpg",
  "eaton-fire-42.jpg",
  "eaton-fire-43.jpg",
  "eaton-fire-44.jpg",
  "eaton-fire-45.jpg",
  "eaton-fire-46.jpg",
  "eaton-fire-47.jpg",
  "eaton-fire-48.jpg",
  "eaton-fire-49.jpg",
  "eaton-fire-50.jpg",
  "eaton-fire-51.jpg",
  "eaton-fire-52.jpg",
  "eaton-fire-53.jpg",
  "eaton-fire-54.jpg",
  "eaton-fire-55.jpg",
  "eaton-fire-56.jpg",
  "eaton-fire-57.jpg",
  "eaton-fire-58.jpg",
  "eaton-fire-59.jpg",
  "eaton-fire-60.jpg",
  "eaton-fire-61.jpg",
  "eaton-fire-62.jpg",
  "eaton-fire-63.jpg",
  "eaton-fire-64.jpg",
  "eaton-fire-65.jpg",
  "eaton-fire-66.jpg",
  "eaton-fire-67.jpg",
  "eaton-fire-68.jpg",
  "eaton-fire-69.jpg",
  "eaton-fire-70.jpg",
  "eaton-fire-71.jpg",
  "eaton-fire-72.jpg",
  "eaton-fire-73.jpg",
  "eaton-fire-74.jpg",
  "eaton-fire-75.jpg",
  "eaton-fire-76.jpg",
  "eaton-fire-77.jpg",
  "eaton-fire-78.jpg",
  "eaton-fire-79.jpg",
  "eaton-fire-80.jpg",
  "eaton-fire-81.jpg",
  "eaton-fire-82.jpg",
  "eaton-fire-83.jpg",
  "eaton-fire-84.jpg",
  "eaton-fire-85.jpg",
  "eaton-fire-86.jpg",
  "eaton-fire-87.jpg",
  "eaton-fire-88.jpg",
  "eaton-fire-89.jpg",
  "eaton-fire-90.jpg",
  "eaton-fire-91.jpg"
];

      // Captions (blank = hidden everywhere)
      const CAPTIONS = {
        "hero.jpg": "",
        "eaton-fire-01.jpg": "",
        "eaton-fire-02.jpg": "",
        "eaton-fire-03.jpg": "",
        "eaton-fire-05.jpg": ""
      };

      /* =========================
         2) HELPERS
         ========================= */
      const clamp = (n, min, max) => Math.max(min, Math.min(max, n));

      function normalizeFilename(name) {
        return (name || "").trim().replace(/^.*\//, "").toLowerCase();
      }

      /* =========================
         3) INLINE PHOTO CAPTIONS
         ========================= */
      document.querySelectorAll(".fn-photo").forEach(fig => {
        const src = fig.getAttribute("data-src") || "";
        const filename = normalizeFilename(src);
        const cap = (CAPTIONS[filename] || "").trim();

        const img = fig.querySelector("img");
        if (img && src && img.getAttribute("src") !== src) {
          img.setAttribute("src", src);
        }

        const capWrap = fig.querySelector(".fn-cap");
        const capLine = fig.querySelector(".cap-line");

        if (capLine) capLine.textContent = cap;
        if (!cap) capWrap && capWrap.classList.add("is-empty");
        else capWrap && capWrap.classList.remove("is-empty");

        if (capLine) capLine.setAttribute("data-cap-for", filename);
      });

      /* =========================
         4) LIGHTBOX ORDER
         ========================= */
      const HERO_IMAGE = BASE + "hero.jpg";

      const LB_ITEMS = [
        { filename: "hero.jpg", src: HERO_IMAGE, alt: "Eaton Fire — hero" },
        ...GALLERY_ORDER.map(fn => ({
          filename: fn.toLowerCase(),
          src: BASE + fn,
          alt: `Eaton Fire photograph ${fn}`
        }))
      ];

      const LB_INDEX_BY_FILENAME = new Map();
      LB_ITEMS.forEach((it, idx) => LB_INDEX_BY_FILENAME.set(it.filename, idx));

      /* =========================
         5) GALLERY BUILD (stable)
         ========================= */
      const grid = document.getElementById("gallery-grid");

      const tileObserver = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add("in");
            tileObserver.unobserve(entry.target);
          }
        });
      }, { threshold: 0.12 });

      function createTile(filenameRaw) {
        const filename = filenameRaw.toLowerCase();
        const src = BASE + filenameRaw;
        const cap = (CAPTIONS[filename] || "").trim();
        const lbIndex = LB_INDEX_BY_FILENAME.get(filename);

        const tile = document.createElement("figure");
        tile.className = "fn-tile" + (cap ? " has-cap" : "");
        tile.dataset.index = String(lbIndex ?? -1);
        tile.dataset.filename = filename;

        tile.innerHTML = `
          <img src="${src}" alt="Eaton Fire photograph" loading="eager" />
          <div class="tile-cap"><span>${cap}</span></div>
        `;
        return { tile, src };
      }

      function appendTileWithAspectRatio(tile, src) {
        const probe = new Image();
        probe.onload = () => {
          const w = probe.naturalWidth || 3;
          const h = probe.naturalHeight || 2;
          tile.style.aspectRatio = `${w} / ${h}`;
          grid.appendChild(tile);
          tileObserver.observe(tile);
        };
        probe.onerror = () => {
          tile.style.aspectRatio = "3 / 2";
          grid.appendChild(tile);
          tileObserver.observe(tile);
        };
        probe.src = src;
      }

      if (grid) {
        GALLERY_ORDER.forEach(fn => {
          const { tile, src } = createTile(fn);
          appendTileWithAspectRatio(tile, src);
        });
      }

      /* =========================
         6) LIGHTBOX
         ========================= */
      const lb = document.getElementById("lb");
      const lbImg = document.getElementById("lb-img");
      const lbCaption = document.getElementById("lb-caption");
      const lbCount = document.getElementById("lb-count");
      const btnClose = document.getElementById("lb-close");
      const btnPrev = document.getElementById("lb-prev");
      const btnNext = document.getElementById("lb-next");

      let current = 0;

      function openLB(index) {
        if (!lb) return;
        current = clamp(index, 0, LB_ITEMS.length - 1);
        lb.classList.add("open");
        lb.setAttribute("aria-hidden", "false");
        document.body.style.overflow = "hidden";
        renderLB(0);
      }

      function closeLB() {
        if (!lb) return;
        lb.classList.remove("open");
        lb.setAttribute("aria-hidden", "true");
        document.body.style.overflow = "";
      }

      function renderLB(direction) {
        const item = LB_ITEMS[current];
        if (!item || !lbImg) return;

        lbImg.style.transition = "none";
        lbImg.style.opacity = "0";

        if (direction === 1) lbImg.style.transform = "translateX(70px)";
        else if (direction === -1) lbImg.style.transform = "translateX(-70px)";
        else lbImg.style.transform = "translateX(0)";

        void lbImg.offsetWidth;

        lbImg.style.transition =
          "transform 0.6s cubic-bezier(0.22, 0.61, 0.36, 1), opacity 0.6s ease";

        lbImg.src = item.src;
        lbImg.alt = item.alt || "";

        const cap = (CAPTIONS[item.filename] || "").trim();
        if (lbCaption) lbCaption.textContent = cap;
        if (lbCount) lbCount.textContent = `${current + 1} / ${LB_ITEMS.length}`;

        requestAnimationFrame(() => {
          lbImg.style.opacity = "1";
          lbImg.style.transform = "translateX(0)";
        });
      }

      function step(delta) {
        current = (current + delta + LB_ITEMS.length) % LB_ITEMS.length;
        renderLB(delta);
      }

      // Click: inline photos
      document.querySelectorAll(".fn-photo img").forEach(img => {
        img.addEventListener("click", () => {
          const filename = normalizeFilename(img.getAttribute("src"));
          const idx = LB_INDEX_BY_FILENAME.get(filename);
          if (typeof idx === "number") openLB(idx);
        });
      });

      // Click: gallery tiles
      if (grid) {
        grid.addEventListener("click", (e) => {
          const tile = e.target.closest(".fn-tile");
          if (!tile) return;
          const idx = parseInt(tile.dataset.index, 10);
          if (!Number.isNaN(idx) && idx >= 0) openLB(idx);
        });
      }

      if (btnClose) btnClose.addEventListener("click", closeLB);
      if (btnPrev) btnPrev.addEventListener("click", (e) => { e.stopPropagation(); step(-1); });
      if (btnNext) btnNext.addEventListener("click", (e) => { e.stopPropagation(); step(1); });

      if (lb) lb.addEventListener("click", (e) => { if (e.target === lb) closeLB(); });

      window.addEventListener("keydown", (e) => {
        if (!lb || !lb.classList.contains("open")) return;
        if (e.key === "Escape") closeLB();
        if (e.key === "ArrowLeft") step(-1);
        if (e.key === "ArrowRight") step(1);
      });

      /* =========================
         7) VIDEO SOUND AFFORDANCE
         - autoplay remains muted (required by browsers)
         - user tap unmutes; then button becomes “Mute”
         ========================= */
      const iframe = document.getElementById("vimeo-iframe");
      const pill = document.getElementById("sound-pill");
      const soundText = document.getElementById("sound-text");

      if (iframe && pill && window.Vimeo && Vimeo.Player) {
        const player = new Vimeo.Player(iframe);

        let isMuted = true;

        function setPillState() {
          if (!soundText) return;
          soundText.textContent = isMuted ? "Tap for sound" : "Mute";
        }

        setPillState();

        pill.addEventListener("click", async () => {
          try{
            // First interaction: unmute + set volume
            if (isMuted) {
              await player.setVolume(1);
              await player.setMuted(false);
              isMuted = false;
            } else {
              await player.setMuted(true);
              isMuted = true;
            }
            setPillState();
          } catch(err){
            // If anything fails, keep the CTA visible
            // (Safari can be picky depending on settings)
            console.log(err);
          }
        });

        // If Vimeo reports mute state changes (e.g. user system), sync
        player.on("volumechange", async () => {
          try{
            const muted = await player.getMuted();
            isMuted = !!muted;
            setPillState();
          } catch(_) {}
        });
      }
    })();
  </script>

  <!-- Site-wide JS -->
  <script src="/assets/js/site.js"></script>
</body>
</html>